# R√®gles de d√©veloppement pour RenovAI

Tu es un assistant de d√©veloppement expert sp√©cialis√© en Next.js 14, TypeScript et React.

## Stack technique
- Next.js 14 avec App Router
- TypeScript strict
- Tailwind CSS pour le styling
- shadcn/ui pour les composants UI
- Framer Motion pour les animations
- React Hook Form + Zod pour les formulaires
- Claude API pour l'IA

## Principes de code

### Architecture
- Utilise l'App Router de Next.js 14 (pas de Pages Router)
- Composants serveur par d√©faut, 'use client' uniquement si n√©cessaire
- Structure modulaire et s√©paration des pr√©occupations
- Favorise la composition de composants
- Types TypeScript stricts, pas de 'any'

### Conventions de nommage
- Fichiers composants: PascalCase (ex: HeroSection.tsx)
- Fichiers utilitaires: kebab-case (ex: format-price.ts)
- Fonctions: camelCase (ex: calculateEstimate)
- Types/Interfaces: PascalCase avec pr√©fixe 'T' pour types (ex: TWorkType)
- Constantes: UPPER_SNAKE_CASE (ex: API_ENDPOINTS)

### Structure des composants
```typescript
// Imports
import { type FC } from 'react'

// Types
interface ComponentNameProps {
  prop: string
}

// Composant
export const ComponentName: FC<ComponentNameProps> = ({ prop }) => {
  // Hooks
  // Handlers
  // Render
  return (
    <div className="...">
      {/* JSX */}
    </div>
  )
}
```

### Styling Tailwind
- Utilise les classes utilitaires de Tailwind
- Classes responsive mobile-first: sm:, md:, lg:, xl:
- Variantes: hover:, focus:, active:, disabled:
- Pas de CSS custom sauf absolument n√©cessaire
- Utilise cn() pour combiner les classes conditionnellement
- Design tokens via tailwind.config.ts

### Gestion d'√©tat
- useState pour l'√©tat local
- useContext pour l'√©tat partag√© l√©ger
- Props drilling minimal (max 2 niveaux)
- Server Components pour data fetching c√¥t√© serveur
- Pas de Redux dans le MVP

### Performance
- Lazy loading des composants lourds (next/dynamic)
- Images optimis√©es avec next/image
- Fonts optimis√©s avec next/font
- Suspense boundaries pour le streaming
- Minimise les rerenders (React.memo si n√©cessaire)

### Accessibilit√©
- Attributs ARIA appropri√©s
- Navigation au clavier
- Labels pour tous les inputs
- Contraste suffisant (WCAG AA)
- Focus visible

### API Routes
- Validation des inputs avec Zod
- Gestion des erreurs appropri√©e
- Status codes HTTP corrects
- Rate limiting (future)
- Logs structur√©s

### IA & Prompts
- Prompts structur√©s et test√©s
- Gestion des timeouts
- Fallbacks si API √©choue
- Validation stricte des r√©ponses IA
- Logging des appels pour monitoring

## Bonnes pratiques sp√©cifiques

### Forms
```typescript
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const schema = z.object({
  field: z.string().min(1, 'Required')
})

const form = useForm({
  resolver: zodResolver(schema)
})
```

### Error Handling
```typescript
try {
  const result = await riskyOperation()
  return result
} catch (error) {
  console.error('Operation failed:', error)
  // User-friendly error message
  throw new Error('Une erreur est survenue')
}
```

### API Calls
```typescript
const response = await fetch('/api/endpoint', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
})

if (!response.ok) {
  throw new Error('API call failed')
}

const result = await response.json()
```

## Interdictions

- ‚ùå Pas de 'any' en TypeScript
- ‚ùå Pas de console.log en production (utilise un logger)
- ‚ùå Pas de secrets dans le code (utilise .env)
- ‚ùå Pas de CSS inline sauf cas exceptionnel
- ‚ùå Pas de composants > 300 lignes (refactor)
- ‚ùå Pas de props drilling > 2 niveaux
- ‚ùå Pas de fetch c√¥t√© client pour data initiale (use Server Components)

## S√©curit√©

- Validation stricte des inputs utilisateur
- Sanitization des donn√©es avant affichage
- Variables d'environnement pour secrets
- HTTPS uniquement en production
- CORS appropri√© pour les API
- Rate limiting sur les endpoints sensibles

## Testing (Future)

- Tests unitaires avec Jest
- Tests d'int√©gration avec Testing Library
- Tests E2E avec Playwright
- Coverage minimum 70%

## Git

- Commits atomiques et descriptifs
- Convention: type(scope): message
  - feat: nouvelle fonctionnalit√©
  - fix: correction de bug
  - refactor: refactoring
  - style: formatage
  - docs: documentation
  - chore: t√¢ches de maintenance
- Branches: feature/*, fix/*, refactor/*

## Documentation

- JSDoc pour les fonctions complexes
- README.md √† jour
- Commentaires uniquement pour le "pourquoi", pas le "quoi"
- Types TypeScript auto-documentants

## Commandes utiles

```bash
# Dev
pnpm dev

# Build
pnpm build

# Lint
pnpm lint

# Format
pnpm format

# Type check
pnpm type-check
```

## Priorit√©s de d√©veloppement

1. **Fonctionnalit√©** - √áa marche
2. **UX** - C'est agr√©able √† utiliser
3. **Performance** - C'est rapide
4. **Maintenabilit√©** - C'est facile √† modifier
5. **Perfectionnisme** - C'est parfait (mais ne bloque pas pour √ßa)

## En cas de doute

- Privil√©gie la simplicit√©
- Suis les conventions Next.js
- R√©utilise les composants shadcn/ui
- Demande si tu n'es pas s√ªr
- Documente les d√©cisions non-√©videntes

---

üéØ **Objectif**: Cr√©er une application moderne, performante et maintenable qui offre une excellente exp√©rience utilisateur.


